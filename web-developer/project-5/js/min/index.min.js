let productsDiv, productCard, imgParent, infosCard, cardName, cardLenses, cardPrice, cardDescription, cardSelectBtn, productCardParent = document.getElementById("products-dynamic"); const getProducts = async function () { let e = await fetch("http://localhost:3000/api/cameras/"); if (e.ok) { let r = await e.json(); for (let e = 0; e < r.length; e++) { function t() { const t = new products(r[e]._id, r[e].imageUrl, r[e].name, r[e].lenses, r[e].price, r[e].description); createContent(), contentValue(t) } t() } } else console.error("Retour du serveur :", e.status) }; function createContent() { productsDiv = document.createElement("div"), productCardParent.appendChild(productsDiv), productsDiv.setAttribute("class", "products"), productCard = document.createElement("div"), productsDiv.appendChild(productCard), productCard.setAttribute("class", "product-card"), imgParent = document.createElement("img"), productCard.appendChild(imgParent), imgParent.setAttribute("width", "400"), imgParent.setAttribute("height", "400"), imgParent.setAttribute("alt", "Voici l'un de nos modèle de caméra que vous pouvez retrouver sur Oricono."), infosCard = document.createElement("div"), productCard.appendChild(infosCard), infosCard.setAttribute("class", "infos-card"), cardName = document.createElement("h3"), infosCard.appendChild(cardName), cardName.setAttribute("class", "cardName"), cardLenses = document.createElement("p"), infosCard.appendChild(cardLenses), cardLenses.setAttribute("class", "cardLenses"), cardPrice = document.createElement("p"), infosCard.appendChild(cardPrice), cardPrice.setAttribute("class", "cardPrice"), cardDescription = document.createElement("p"), infosCard.appendChild(cardDescription), cardDescription.setAttribute("class", "cardDescription"), (cardSelectBtn = document.createElement("a")).innerHTML = "Séléctionner", cardSelectBtn.setAttribute("class", "btn"), cardSelectBtn.classList.add("btn_home"), cardSelectBtn.setAttribute("title", "Séléctionner et personnaliser ce produit"), cardSelectBtn.setAttribute("aria-label", "Sélectionner et personnaliser ce produit") } function contentValue(e) { imgParent.setAttribute("src", e.imageUrl), cardName.innerHTML = e.name, cardPrice.innerHTML = e.price + " €", cardDescription.innerHTML = e.description, cardLenses.innerHTML = e.lense.join(" ou "), cardDescription.appendChild(cardSelectBtn), cardSelectBtn.setAttribute("href", "produit.html?" + e.id) } getProducts();