let productSelect, imgParent, imgProduct, productName, productLenses, productDescription, productPrice, productCardParent = document.getElementById("custom-and-select"); const getProducts = async function () { let e = await fetch("http://localhost:3000/api/cameras/"); if (e.ok) { let c = await e.json(); for (let e = 0; e < c.length; e++) { function t() { const t = new products(c[e]._id, c[e].imageUrl, c[e].name, c[e].lenses, c[e].price, c[e].description); let r = "?" + t.id; if (window.location.search.indexOf(r) > -1) { createContent(), contentValue(t); let e = document.querySelector("form"); productSelect.appendChild(e), document.querySelector("option").setAttribute("class", "hide"); const c = document.querySelector("select"); for (let r = 0; r < t.lense.length; r++) { let n = document.createElement("option"); n.setAttribute("class", "lense"), n.setAttribute("value", t.lense[r]), n.setAttribute("selected", "false"), n.innerHTML = t.lense[r], c.appendChild(n), e.addEventListener("submit", function (e) { if (!0 === n.selected && "" !== n.value) { let e = JSON.parse(sessionStorage.getItem("product") || "[]"), c = { id: t.id, name: t.name, price: t.price, lenses: n.value }; e.push(c), sessionStorage.setItem("product", JSON.stringify(e)) } }) } } } t() } } else console.error("Retour du serveur :", e.status) }; function createContent() { productSelect = document.createElement("div"), productCardParent.appendChild(productSelect), productSelect.setAttribute("class", "product-select"), imgParent = document.createElement("div"), productSelect.appendChild(imgParent), imgParent.setAttribute("class", "imgParent"), imgProduct = document.createElement("img"), imgParent.appendChild(imgProduct), imgProduct.classList.add("img-customize"), imgProduct.setAttribute("alt", "Personnalier votre caméra pour valider votre commande chez Oricono."), productName = document.createElement("p"), productSelect.appendChild(productName), productName.setAttribute("class", "name"), productLenses = document.createElement("p"), productSelect.appendChild(productLenses), productLenses.setAttribute("class", "lenses"), productDescription = document.createElement("p"), productSelect.appendChild(productDescription), productDescription.setAttribute("class", "description"), productPrice = document.createElement("p"), productSelect.appendChild(productPrice), productPrice.setAttribute("class", "price") } function contentValue(e) { imgProduct.setAttribute("src", e.imageUrl), productName.innerHTML = e.name, productLenses.innerHTML = e.lense.join(" ou "), productDescription.innerHTML = e.description, productPrice.innerHTML = e.price + " €" } getProducts();